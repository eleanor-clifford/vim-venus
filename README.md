# Venus

It's like Jupyter, but lighter, faster, and hotter. Integrates interpreted
languages (currently python, shell, and haskell) with LaTeX into one markdown
document.

![Demo](demo.gif)

## Installation

Use your favourite plugin manager. For example with
[Vundle.vim](https://github.com/VundleVim/Vundle.vim):
```vimscript
Plugin 'ellie-clifford/vim-venus'
```

# Dependencies

- [skywind3000/asyncrun.vim](https://github.com/skywind3000/asyncrun.vim)

- An installation of pandoc with xelatex (e.g. `pandoc` and `texlive-most` on
  Arch Linux

- Linux (this may work on other operating systems, and I will review PRs aimed
  at them, but I do not intend to actively maintain them)

Optional:

- [ellie-clifford/jupytext.vim](https://git.sr.ht/~ecc/jupytext.vim)
  (forked from [goerz/jupytext.vim](https://github.com/goerz/jupytext.vim) to
  make a minor change) to automatically convert `.ipynb` notebooks to markdown

- [SirVer/ultisnips](https://github.com/SirVer/ultisnips) to enable snippets

- [lervag/vimtex](https://github.com/lervag/vimtex) for advanced LaTeX usage

# Usage

Venus will start on all markdown files by default (this can be disabled with
`let g:venus_mappings = 0`). Markdown works as it normally would with pandoc,
including inline LaTeX. Venus recognises code blocks and, when executed, will
put the result into another code block after the block (if Venus understands
how to execute it). Existing blocks generated by venus will be replaced.

Here is an example:

    ```haskell
    putStrLn "Hello world!"
    ```

will become

    ```haskell
    putStrLn "Hello world!"
    ```
    ```output
    Hello world!
    ```

Any errors which occur will also be put into the code block like so:

	```python
	print("Hi world")
	6 = 0
	```
	```output
	Hi world
	File "<stdin>", line 1
		6 = 0
		^
	SyntaxError: cannot assign to literal
	```

Venus also provides a simple variable explorer for python, which shows variable
names and their value in the quickfix list.

If Venus is misbehaving, you can see the raw interpreter output in the job
buffers, named according to the name of the interpreted language. (Only in vim
currently, not neovim)

# Mappings

A number of mappings are enabled by default (they can be disabled with `let
g:venus_mappings = 0`). For a full list see [doc/venus.txt](./doc/venus.txt)
(or `:help venus-maqs`). By default vimtex is also started (if it is
installed).  This can be disabled with `let g:venus_vimtex_enabled = 0`

# Options

See [doc/venus.txt](./doc/venus.txt) for a full list of options.

# Known Issues

- Occasionally the interpreter needs an extra like to process a block of code.
  For example:

```python
for i in range(2):
	print("foo")
print("bar")
```

results in

```output
File "<stdin>", line 3
    print("bar")
    ^
SyntaxError: invalid syntax
```

because the python interpreter requires an extra line after the end of blocks.

# Acknowledgements

This repository uses an extract from
[vim-pandoc-syntax](https://github.com/vim-pandoc/vim-pandoc-syntax) to achieve
inline latex syntax highlighting. See [syntax/venus.vim](./syntax/venus.vim)
for details
